import*as e from"https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js";import{PointerLockControls as b}from"https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/controls/PointerLockControls.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const w of i.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&f(w)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function f(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();const a=new e.Scene;a.background=new e.Color(8900331);const c=new e.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),u=new e.WebGLRenderer({antialias:!0});u.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(u.domElement);const v=new e.AmbientLight(16777215,.5);a.add(v);const y=new e.DirectionalLight(16777215,.8);y.position.set(5,10,7.5);a.add(y);const d=new b(c,document.body);c.position.set(0,2,5);const p=document.getElementById("overlay");p.addEventListener("click",()=>{d.lock()});d.addEventListener("lock",()=>{p.classList.add("hidden")});d.addEventListener("unlock",()=>{p.classList.remove("hidden")});const o={w:!1,a:!1,s:!1,d:!1,space:!1};document.addEventListener("keydown",n=>{n.code==="KeyW"&&(o.w=!0),n.code==="KeyS"&&(o.s=!0),n.code==="KeyA"&&(o.a=!0),n.code==="KeyD"&&(o.d=!0),n.code==="Space"&&(o.space=!0)});document.addEventListener("keyup",n=>{n.code==="KeyW"&&(o.w=!1),n.code==="KeyS"&&(o.s=!1),n.code==="KeyA"&&(o.a=!1),n.code==="KeyD"&&(o.d=!1),n.code==="Space"&&(o.space=!1)});const h=new e.Mesh(new e.BoxGeometry(100,1,100),new e.MeshLambertMaterial({color:2263842}));h.position.y=-.5;a.add(h);const g=new e.Mesh(new e.BoxGeometry(1,1,1),new e.MeshLambertMaterial({color:16711680}));g.position.y=.5;a.add(g);let l=0,m=!0;const E=9.8,O=5;function L(){if(requestAnimationFrame(L),d.isLocked===!0){const r=new e.Vector3,s=new e.Vector3;c.getWorldDirection(s),s.y=0,s.normalize();const f=new e.Vector3().crossVectors(new e.Vector3(0,1,0),s).normalize();o.w&&r.add(s),o.s&&r.sub(s),o.a&&r.sub(f),o.d&&r.add(f),r.normalize(),d.getObject().position.addScaledVector(r,O*.016),l-=E*.016,o.space&&m&&(l=5,m=!1),d.getObject().position.y+=l*.016,d.getObject().position.y<2&&(l=0,d.getObject().position.y=2,m=!0)}u.render(a,c)}L();window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)});
