import*as n from"https://unpkg.com/three@0.160.0/build/three.module.js";import{PointerLockControls as W}from"https://unpkg.com/three@0.160.0/examples/jsm/controls/PointerLockControls.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();let a,d,m,c,o=new n.Vector3,w=new n.Vector3,p=!1,y=!1,h=!1,b=!1,v=!1,z=performance.now();E();A();function E(){a=new n.Scene,a.background=new n.Color(8900331),d=new n.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),d.position.set(0,10,0),m=new n.WebGLRenderer({antialias:!0}),m.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(m.domElement);const f=new n.AmbientLight(16777215,.4);a.add(f);const t=new n.DirectionalLight(16777215,1);t.position.set(50,100,50),a.add(t);const i=1,l=30,e=30,r=new n.BoxGeometry(i,i,i),u=new n.MeshLambertMaterial({color:2263842});for(let s=-l/2;s<l/2;s++)for(let g=-e/2;g<e/2;g++){const O=Math.floor(Math.random()*3);for(let L=0;L<=O;L++){const x=new n.Mesh(r,u);x.position.set(s*i,L*i,g*i),a.add(x)}}c=new W(d,document.body),document.addEventListener("click",()=>c.lock()),a.add(c.getObject());const k=function(s){switch(s.code){case"ArrowUp":case"KeyW":p=!0;break;case"ArrowLeft":case"KeyA":h=!0;break;case"ArrowDown":case"KeyS":y=!0;break;case"ArrowRight":case"KeyD":b=!0;break;case"Space":v===!0&&(o.y+=5),v=!1;break}},K=function(s){switch(s.code){case"ArrowUp":case"KeyW":p=!1;break;case"ArrowLeft":case"KeyA":h=!1;break;case"ArrowDown":case"KeyS":y=!1;break;case"ArrowRight":case"KeyD":b=!1;break}};document.addEventListener("keydown",k),document.addEventListener("keyup",K),window.addEventListener("resize",M)}function M(){d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}function A(){requestAnimationFrame(A);const f=performance.now(),t=(f-z)/1e3;o.x-=o.x*10*t,o.z-=o.z*10*t,o.y-=9.8*10*t,w.z=Number(p)-Number(y),w.x=Number(b)-Number(h),w.normalize(),(p||y)&&(o.z-=w.z*100*t),(h||b)&&(o.x-=w.x*100*t),c.moveRight(-o.x*t),c.moveForward(-o.z*t),c.getObject().position.y+=o.y*t,c.getObject().position.y<2&&(o.y=0,c.getObject().position.y=2,v=!0),m.render(a,d),z=f}
