import*as r from"https://unpkg.com/three@0.161.0/build/three.module.js";import{PointerLockControls as L}from"https://unpkg.com/three@0.161.0/examples/jsm/controls/PointerLockControls.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function u(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=u(e);fetch(e.href,n)}})();const a=new r.Scene;a.background=new r.Color(8900331);const d=new r.PerspectiveCamera(75,innerWidth/innerHeight,.1,1e3),f=new r.WebGLRenderer({antialias:!0});f.setSize(innerWidth,innerHeight);document.body.appendChild(f.domElement);a.add(new r.AmbientLight(16777215,.5));const b=new r.DirectionalLight(16777215,1);b.position.set(10,20,10);a.add(b);const i=new L(d,f.domElement);document.addEventListener("click",()=>i.lock());const s={};document.addEventListener("keydown",o=>s[o.code]=!0);document.addEventListener("keyup",o=>s[o.code]=!1);const p=1,y=20,g=20,v=new r.BoxGeometry(p,p,p),x=new r.MeshLambertMaterial({color:5614131});for(let o=-y/2;o<y/2;o++)for(let t=-g/2;t<g/2;t++){const u=Math.floor(Math.random()*4);for(let c=0;c<=u;c++){const e=new r.Mesh(v,x);e.position.set(o,c,t),a.add(e)}}d.position.set(0,5,10);i.getObject().position.set(0,5,10);let l=0,h=!1;const O=.15;function w(){if(requestAnimationFrame(w),i.isLocked){let o=.15;const t=new r.Vector3;s.KeyW&&(t.z-=o),s.KeyS&&(t.z+=o),s.KeyA&&(t.x-=o),s.KeyD&&(t.x+=o),l-=O,s.Space&&h&&(l=.3,h=!1),i.moveRight(t.x),i.moveForward(t.z),i.getObject().position.y+=l,i.getObject().position.y<3&&(i.getObject().position.y=3,l=0,h=!0)}f.render(a,d)}w();window.addEventListener("resize",()=>{d.aspect=innerWidth/innerHeight,d.updateProjectionMatrix(),f.setSize(innerWidth,innerHeight)});
