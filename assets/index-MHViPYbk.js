import*as n from"https://unpkg.com/three@0.161.0/build/three.module.js";import{PointerLockControls as k}from"https://unpkg.com/three@0.161.0/examples/jsm/controls/PointerLockControls.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function w(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(e){if(e.ep)return;e.ep=!0;const o=w(e);fetch(e.href,o)}})();const u=new n.Scene;u.background=new n.Color(8900331);const l=new n.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),m=new n.WebGLRenderer({antialias:!0});m.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(m.domElement);const y=new n.DirectionalLight(16777215,1);y.position.set(1,1,1);u.add(y);const s=1,p=40,b=40,L=5,v=new n.BoxGeometry(s,s,s),x=new n.MeshLambertMaterial({color:2263842});for(let r=-p/2;r<p/2;r++)for(let i=-b/2;i<b/2;i++){const w=Math.floor(Math.random()*L);for(let c=0;c<=w;c++){const e=new n.Mesh(v,x);e.position.set(r*s,c*s,i*s),u.add(e)}}const d=new k(l,document.body);document.body.addEventListener("click",()=>d.lock());l.position.set(0,10,10);d.getObject().position.y=10;const f=new n.Vector3,a=new n.Vector3,t={forward:!1,backward:!1,left:!1,right:!1,jump:!1};document.addEventListener("keydown",r=>{switch(r.code){case"KeyW":t.forward=!0;break;case"KeyS":t.backward=!0;break;case"KeyA":t.left=!0;break;case"KeyD":t.right=!0;break;case"Space":t.jump=!0;break}});document.addEventListener("keyup",r=>{switch(r.code){case"KeyW":t.forward=!1;break;case"KeyS":t.backward=!1;break;case"KeyA":t.left=!1;break;case"KeyD":t.right=!1;break;case"Space":t.jump=!1;break}});const z=new n.Clock;function g(){const r=z.getDelta();if(d.isLocked){a.z=Number(t.forward)-Number(t.backward),a.x=Number(t.right)-Number(t.left),a.normalize();const i=5;f.x=a.x*i*r,f.z=a.z*i*r,d.moveRight(f.x),d.moveForward(f.z)}m.render(u,l),requestAnimationFrame(g)}g();window.addEventListener("resize",()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)});
